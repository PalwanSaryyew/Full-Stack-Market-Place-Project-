<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/menu.css" />
    <style>
      #bagetContainer {
        display: none;
      }

      #bagetSection.active {
        display: block;
      }

      #bagetContainer.active {
        display: block;
      }

      #checkoutWindow.active {
        display: grid;
      }

      #checkoutWindowEmtyZone.active {
        display: block;
      }

      #asideSection.active {
        display: grid;
      }

      input[type="number"]::-webkit-inner-spin-button {
        display: none;
      }

      input[type="number"]::outer-spin-button {
        display: none;
      }

      ::-webkit-scrollbar {
        display: none;
      }
    </style>
  </head>

  <body class="bg-slate-100">
    <!-- menu -->
    <%- include('./../partials/_menu') %>

    <!-- messages container -->
    <div id="messagesContainer" class="messagesZ fixed top-0 grid"></div>

    <!-- baget partial -->
    <%- include('./../partials/_baget') %>

    <!-- Sign page -->
    <%- include('./../partials/_sign') %>

    <button id="logout" class="bg-red-400 mt-16 p-5 inline-block">
      Çıkış yap
    </button>
    <script>
      document.querySelector("#logout").addEventListener("click", () => {
        fetch("http://localhost:3050/users/loguot", {
          method: "POST",
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.message) {
              const messageElement = document.createElement("div");
              messageElement.setAttribute("id", "messageElemet" + messageCount);
              messageCount++;
              messageElement.innerHTML = `<div id="newMessageElemet${messageCount}" class="messageElement ${
                data.success ? "bg-green-500" : "bg-red-500"
              }">${data.message}</div>`;
              messagesContainer.appendChild(messageElement);

              setTimeout(() => {
                window.location.href = '/';
              }, 3000);
            }
          })
          .catch((error) => {
            console.log(error);
            const messageElement = document.createElement("div");
            messageElement.setAttribute("id", "messageElemet" + messageCount);
            messageCount++;
            messageElement.innerHTML = `<div id="newMessageElemet${messageCount}" class="messageElement bg-red-500">${error.message}</div>`;
            messagesContainer.appendChild(messageElement);
          });
      });
    </script>
    <script src="/js/baget.js"></script>
    <script src="/js/menu.js"></script>
    <script src="/js/sign.js"></script>
  </body>
</html>
